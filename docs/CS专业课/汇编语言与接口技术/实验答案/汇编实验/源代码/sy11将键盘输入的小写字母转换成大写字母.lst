Microsoft (R) Macro Assembler Version 6.11		    10/24/22 19:51:23
tempfile.asm						     Page 1 - 1


 0000				data SEGMENT 
 0000 70 6C 65 61 73 65			ts DB 'please input:$' 
       20 69 6E 70 75 74
       3A 24
 000E 0A 0D 70 72 65 73			again DB 0ah,0dh,'press ctrl+C to end,else again:$' 
       73 20 63 74 72 6C
       2B 43 20 74 6F 20
       65 6E 64 2C 65 6C
       73 65 20 61 67 61
       69 6E 3A 24
 0030  000A [				string DB 10 DUP(?),'$'
        00
       ] 24
 003B				data ENDS 

 0000				code SEGMENT 
					ASSUME CS:code,DS:data 
 0000				start: 
					;加载数据段
 0000  B8 ---- R			MOV AX,data  
 0003  8E D8				MOV DS,AX 

					
 0005  8D 1E 0030 R			LEA BX,STRING ;BX指向缓冲区
 0009  33 F6				XOR SI,SI ;将SI清零
					
 000B  8D 16 0000 R			LEA DX,ts 
 000F  B4 09				MOV AH,09h ;显示输出提示字符串 
 0011  CD 21				INT 21h 
 0013				again1:
					
 0013  B4 01				MOV AH,01h ;调用01号功能接收字符 
 0015  CD 21				INT 21h 
					
 0017  3C 03				CMP AL,3 ;CTRL+C对应ascll为3
 0019  74 1B				JZ  done
					
 001B  3C 0D				CMP AL,13 ;回车对应ascll为13
 001D  74 0F				JZ  show
				 	
 001F  3C 61				CMP AL,'a' ;与a的ASCll比较，小于则转移 
 0021  72 06				JB nochange
 0023  3C 7A				CMP AL,'z' ;与z的ASCll比较，大于则转移 
 0025  77 02				JA nochange
 0027  2C 20				SUB AL,20h ;将小写转换为大写 

 0029				nochange:
 0029  88 00				mov [BX+SI],AL ;存放该字符
 002B  46				INC SI ;SI+1
 002C  EB E5				jMP again1 
 002E				show:
					;mov [BX+SI],'$';
 002E  8D 16 0030 R			LEA DX,STRING
 0032  B4 09				mov AH,09H  ;显示缓冲区的字符
 0034  CD 21				int 21H
 0036				done:
 0036  B4 4C				MOV AH,4cH
 0038  CD 21				INT 21h 

				;换行函数
 003A				CRLF    PROC    near 
 003A  52				PUSH DX ;保护之前的数据
 003B  50				PUSH AX                    
 003C  B2 0D				MOV DL,0DH
 003E  B4 02			    MOV AH,02H
 0040  CD 21			    INT 21H       ;光标移到第一列              
 0042  B2 0A			    MOV DL,0AH
 0044  B4 02			    MOV AH,02H
 0046  CD 21			    INT 21H       ;光标移到下一行
 0048  58			    POP AX
 0049  5A				POP DX             
 004A  C3			    RET
 004B				CRLF ENDP



 004B				code ENDS 
				END start 




Microsoft (R) Macro Assembler Version 6.11		    10/24/22 19:51:23
tempfile.asm						     Symbols 2 - 1




Segments and Groups:

                N a m e                 Size     Length   Align   Combine Class

code . . . . . . . . . . . . . .	16 Bit	 004B	  Para	  Private 
data . . . . . . . . . . . . . .	16 Bit	 003B	  Para	  Private 


Procedures,  parameters and locals:

                N a m e                 Type     Value    Attr

CRLF . . . . . . . . . . . . . .	P Near	 003A	  code	Length= 0011 Public


Symbols:

                N a m e                 Type     Value    Attr

again1 . . . . . . . . . . . . .	L Near	 0013	  code	
again  . . . . . . . . . . . . .	Byte	 000E	  data	
done . . . . . . . . . . . . . .	L Near	 0036	  code	
nochange . . . . . . . . . . . .	L Near	 0029	  code	
show . . . . . . . . . . . . . .	L Near	 002E	  code	
start  . . . . . . . . . . . . .	L Near	 0000	  code	
string . . . . . . . . . . . . .	Byte	 0030	  data	
ts . . . . . . . . . . . . . . .	Byte	 0000	  data	

	   0 Warnings
	   0 Errors
